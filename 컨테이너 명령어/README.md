# ğŸ‹ ë„ì»¤ ì»¨í…Œì´ë„ˆ ëª…ë ¹ì–´
### ğŸŸ ì»¨í…Œì´ë„ˆëŠ” í”„ë¡œì„¸ìŠ¤ë‹¤
ë„ì»¤ ì»¨í…Œì´ë„ˆëŠ” ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“¤ì–´ì§€ëŠ” ìŠ¤ëƒ…ìˆì´ë‹¤. ì´ ìŠ¤ëƒ…ìˆì€ ì½ê¸° ì „ìš©ì˜ ë„ì»¤ ì´ë¯¸ì§€ ë ˆì´ì–´ë¥¼ ë³µì œí•œ ê²ƒì´ê³ , ê·¸ ìœ„ì— ì½ê³  ì“°ê¸°ê°€ ê°€ëŠ¥í•œ ì»¨í…Œì´ë„ˆ ë ˆì´ì–´ë¥¼ ê²°í•©í•˜ë©´ ì»¨í…Œì´ë„ˆê°€ ëœë‹¤. `ì»¨í…Œì´ë„ˆëŠ” ê²©ë¦¬ëœ ê³µê°„ì—ì„œ í”„ë¡œì„¸ìŠ¤ê°€ ë™ì‘í•˜ëŠ” ê¸°ìˆ ì´ë‹¤.`ë¼ëŠ” ë§ì„ ë“¤ì–´ ë³´ì•˜ì„ ê²ƒì´ë‹¤. ëª…ë ¹ì–´ `dokcer run`ì„ ì‚¬ìš©í•˜ë©´ ì»¨í…Œì´ë„ˆê°€ ë™ì‘í•˜ê²Œ ë˜ê³ , ê°€ìƒì˜ ê²©ë¦¬ í™˜ê²½ì— ë…ë¦½ëœ í”„ë¡œì„¸ìŠ¤ê°€ ë™ì‘í•œë‹¤. ë§ˆì¹˜ ì„œë²„ í˜¸ìŠ¤íŠ¸ ìš´ì˜ì²´ì œê°€ ë…ë¦½ì ìœ¼ë¡œ ë™ì‘í•˜ëŠ” ê²ƒê³¼ ìœ ì‚¬í•˜ë‹¤.  

ì „í†µì ì¸ ë¦¬ëˆ…ìŠ¤ í˜¸ìŠ¤íŠ¸ ìš´ì˜ì²´ì œë¥¼ ë¶€íŒ…í•˜ë©´ PID 1ë²ˆì€ init(í˜„ëŒ€ëŠ” systemd) í”„ë¡œì„¸ìŠ¤ê°€ ë™ì‘í•˜ë©° ì´ í¬ë¡œì„¸ìŠ¤ëŠ” ë‚˜ë¨¸ì§€ ëª¨ë“  ì‹œìŠ½ë©” í”„ë¡œì„¸ìŠ¤ì˜ ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ê°€ ëœë‹¤. ê·¸ëŸ°ë° ë„ì»¤ ì»¨í…Œì´ë„ˆì—ì„œë„ PID 1ë²ˆ í”„ë¡œì„¸ìŠ¤ê°€ initì¼ê¹Œ? 

```bash
# í˜„ì¬ í˜¸ìŠ¤íŠ¸ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ ì‰˜ í”„ë¡œì„¸ìŠ¤ PID
$ echo $$
2957

# centos 8ë²„ì „ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ ì»¨í…Œì´ë„ˆ ìƒì„± í›„ bash ëª¨ë“œë¡œ ì‹¤í–‰
$ docker run -it centos:8 bash
[root@ì»¨í…Œì´ë„ˆID /]$ echo $$
1 # ì»¨í…Œì´ë„ˆ ì²« ì‰˜ì€ PID 1ë²ˆì„ : 1ë²ˆì´ ë°˜ë“œì‹œ initì€ ì•„ë‹ˆë‹¤ !
[root@ì»¨í…Œì´ë„ˆID /]$ exit
exit
```

`docker run -it ì´ë¯¸ì§€ bash`ë¡œ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„± í›„ bash ëª¨ë“œë¡œ ì‹¤í–‰ì‹œí‚¨ ë’¤ í”„ë¡œì„¸ìŠ¤ IDë¥¼ í™•ì¸ í•  ê²°ê³¼ 1ë²ˆì´ ì¶œë ¥ë˜ì—ˆë‹¤. ì´ëŠ” ë„ì»¤ ì»¨í…Œì´ë„ˆì˜ 1ë²ˆ í”„ë¡œì„¸ìŠ¤ëŠ” ë°˜ë“œì‹œ initì´ ì•„ë‹ ìˆ˜ë„ ìˆë‹¤ëŠ” ê²°ê³¼ì— ë„ë‹¬í–ˆë‹¤.

##
### ğŸŸ ì»¨í…Œì´ë„ˆ ì‹¤í–‰
ì»¨í…Œì´ë„ˆ ì‹¤í–‰ì„ ìœ„í•´ `docker run` ëª…ë ¹ì„ ì‚¬ìš©í•˜ë©´ í•´ë‹¹ ë„ì»¤ ì´ë¯¸ì§€ ìŠ¤ëƒ…ìˆ ë ˆì´ì–´ ìœ„ì— ì½ê³  ì“°ê¸°ê°€ ê°€ëŠ¥í•œ ì»¨í…Œì´ë„ˆ ë ˆì´ì–´ë¥¼ ì¶”ê°€í•œ ë’¤ `docker start` ëª…ë ¹ìœ¼ë¡œ ì»¨í…Œì´ë„ˆë¥¼ ì‹œì‘í•œë‹¤. ì´ë ‡ê²Œ ì‹¤í–‰ëœ ì»¨í…Œì´ë„ˆë¥¼ ì¡°íšŒí•˜ëŠ” ë°©ë²•ì€ `docker ps` ëª…ë ¹ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤.

```bash
# docker create : ì»¨í…Œì´ë„ˆ ìƒì„± ëª…ë ¹ì–´
# --name > : ìƒì„± í•  ì»¨í…Œì´ë„ˆ ì´ë¦„
$ docker create -it --name test ubuntu:14.04

# test ì»¨í…Œì´ë„ˆ ì‹¤í–‰
$ docker start test

# ì‹¤í–‰ ì¤‘ì¸ ì»¨í…Œì´ë„ˆ ì¡°íšŒ
$ docker ps
CONTAINER ID   IMAGE          COMMAND       CREATED          STATUS         PORTS     NAMES
b50a90ab3cd4   ubuntu:14.04   "/bin/bash"   33 seconds ago   Up 4 seconds             test

# ì»¨í…Œì´ë„ˆ ì ‘ì†
# docker attach container : ì‹¤í–‰ì¤‘ì¸ ì»¨í…Œì´ë„ˆì— ë‚´ í„°ë¯¸ë„ì„ attach í•˜ëŠ” ëª…ë ¹ì–´
# exitë¥¼ í•˜ë©´ ì»¨í…Œì´ë„ˆë„ ì¢…ë£Œëœë‹¤.
$ docker attach test
root@ì»¨í…Œì´ë„ˆID:/$ ls
bin  boot  dev  etc  home  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var

root@ì»¨í…Œì´ë„ˆID:/$ exit
exit
```

ìœ„ì˜ ì‘ì—…ì„ docker runìœ¼ë¡œ ìˆ˜í–‰í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.
```bash
$ docker run -it --name test ubuntu:14.04 bash
root@d116649d5f60:/# exit
exit
```
docker runì˜ íŠ¹ì§•ì€ í˜¸ìŠ¤íŠ¸ ì„œë²„ì— ì´ë¯¸ì§€ê°€ ë‹¤ìš´ë¡œë“œ ë˜ì–´ ìˆì§€ ì•Šì•„ë„ ë¡œì»¬ì— ì¡´ì¬í•˜ëŠ” ì´ë¯¸ì§€ë¥¼ ë„ì»¤ í—ˆë¸Œì—ì„œ ìë™ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œë¥¼ í•´ì£¼ê³  ì»¨í…Œì´ë„ˆ ìƒì„± í›„ ì‹¤í–‰ê¹Œì§€ í•¨ê»˜ ì²˜ë¦¬ëœë‹¤ëŠ” ì ì´ë‹¤.
> docker run = [pull] + create + start + [command]

##
### ğŸŸ ì‹¤ìŠµ : Ngnix ì»¨í…Œì´ë„ˆ ì‹¤í–‰
```bash
# nginx 1.18 ë²„ì „ ë‹¤ìš´ë¡œë“œ
$ docker pull nginx:1.18
$ docker images
REPOSITORY   TAG       IMAGE ID       CREATED         SIZE
nginx        1.18      e90ac5331fe0   4 years ago     200MB

# ì»¨í…Œì´ë„ˆ ì‹¤í–‰
# -d: ì»¨í…Œì´ë„ˆë¥¼ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰í•˜ê³  ì»¨í…Œì´ë„ˆ ID ì¶œë ¥
# -p : ì»¨í…Œì´ë„ˆì˜ í•´ë‹¹ í¬íŠ¸ë¥¼ HOST í•´ë‹¹ í¬íŠ¸ë¡œ ì˜¤í”ˆ (í˜¸ìŠ¤íŠ¸:ì»¨í…Œì´ë„ˆ)
$ docker run --name webserver1 -d -p 8081:80 nginx:1.18
aa922c39f991206049030dc5d18770d08d67067af91de41779532f650171c1d2

# ì‹¤í–‰ ì¤‘ì¸ ì»¨í…Œì´ë„ˆ ì¡°íšŒ
$ docker ps
CONTAINER ID   IMAGE        COMMAND                  CREATED         STATUS         PORTS                                     NAMES
aa922c39f991   nginx:1.18   "/docker-entrypoint.â€¦"   4 seconds ago   Up 3 seconds   0.0.0.0:8081->80/tcp, [::]:8081->80/tcp   webserver1

# localhost:8081 HTTP ìš”ì²­
$ curl localhost:8081
<!DOCTYPE html>
<html>
<head>
<title>Welcome to nginx!</title>
...

# nginx ì»¨í…Œì´ë„ˆì˜ ì ‘ê·¼ ë¡œê·¸ í™•ì¸ (-f : ì‹¤ì‹œê°„, -t: ë§ˆì§€ë§‰ ë¡œê·¸ê¹Œì§€)
$ docker logs -f webserver1
...
172.17.0.1 - - [08/Sep/2025:09:29:49 +0000] "GET / HTTP/1.1" 200 612 "-" "curl/8.5.0" "-"
172.17.0.1 - - [08/Sep/2025:09:31:16 +0000] "GET / HTTP/1.1" 200 612 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36" "-"

# ì»¨í…Œì´ë„ˆ ì •ì§€
$ docker stop webserver1
webserver1

# localhost:8081 HTTP ìš”ì²­ : ì»¨í…Œì´ë„ˆë¥¼ ì •ì§€í–ˆìœ¼ë¯€ë¡œ ì‹¤íŒ¨
$ curl localhost:8081
curl: (7) Failed to connect to localhost port 8081 after 0 ms: Could not connect to server

# nginx ì»¨í…Œì´ë„ˆ ì‹¤í–‰
$ docker start webserver1
webserver1

# vi í¸ì§‘ê¸°ë¡œ  index.html ë‚´ìš©ì„ ë³€ê²½
$ vi index.html
<h1>Hello world!</h1>

# ë„ì»¤ cp ëª…ë ¹ì„ í†µí•´ ì»¨í…Œì´ë„ˆ ë‚´ë¶€ index.html íŒŒì¼ ê²½ë¡œì— ë³µì‚¬
$ docker cp index.html webserver1:/usr/share/nginx/html/index.html

# ë³€ê²½ëœ ë‚´ìš© í™•ì¸
$ curl localhost:8081
<h1>Hello World!</h1>
```
